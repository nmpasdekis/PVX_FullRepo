{"Category":"Modals","Access":["SuperAdmin"],"Controller":"[\"$scope\", \"$http\", \"$mdDialog\", \"$rootScope\", function ($scope, $http, $mdDialog, $rootScope) {\n    $scope.acc={};\n    $scope.$mdDialog = $mdDialog;\n    $scope.getLocation = function(){\n        return window.location.pathname + window.location.search + window.location.hash;\n    }\n    $scope.login = function(username, password){\n        $http.post(\"/account/login\", { username: username, password: password }).then(() =>{\n\t\t\tlet cookie = document.cookie.match(/pvx-token=([^\\&]+)/);\n\t\t\t$rootScope.User = null;\n\t\t\tif(cookie)\n\t\t\t\t$rootScope.User = JSON.parse(Base64.decode(cookie[1].slice(44)).replace(/\\0+$/, \"\"));\n            $mdDialog.hide();\n        })\n    }\n}]","IsModal":true,"Html":"<md-dialog>\n    <md-toolbar class=\"md-table-toolbar md-default\">\n        <div class=\"md-toolbar-tools\">\n            <h3 class=\"text-center\">Login</h3>\n        </div>\n    </md-toolbar>\n    <form action=\"/account/login\" method=\"POST\">\n        <md-dialog-content layout=\"column\" style=\"padding:20px 10px 10px 10px\">\n            <md-input-container style=\"margin-bottom:0\" flex>\n                <input name=\"username\" ng-model=\"acc.username\" placeholder=\"Username\" />\n            </md-input-container>\n            <md-input-container style=\"margin-bottom:0\" flex>\n                <input name=\"password\" type=\"password\" ng-model=\"acc.password\" placeholder=\"Password\" />\n            </md-input-container flex>\n            <input type=\"hidden\" name=\"returnUrl\" value=\"{{getLocation()}}\" />\n        </md-dialog-content>\n        <md-dialog-actions layout=\"row\">\n            <!--md-button type=\"submit\" style=\"margin:0\" class=\"md-primary md-raised\">OK</md-button-->\n            <md-button ng-click=\"login(acc.username, acc.password)\" style=\"margin:0\" class=\"md-primary md-raised\">OK</md-button>\n            <span flex></span>\n            <md-button ng-click=\"$mdDialog.cancel()\" style=\"margin:0\" class=\"md-warn md-raised\">Cancel</md-button>\n        </md-dialog-actions>\n    </form>\n</md-dialog>\n\n<!-- ng-click=\"login(acc.username, acc.password)\" -->","Name":"LoginPanel"}